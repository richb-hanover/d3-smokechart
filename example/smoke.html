<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test 1</title>
</head>
<body>
<h1>Smokechart v2 Test Page</h1>

<p>Here is the smoke chart</p>

<div id="smokechart" style="height:300px; width:1000px; border:1px solid pink;">

</div>
<noscript>You need to enable JavaScript to run this app.</noscript>
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="http://localhost:3000/umd/smokechart.js"  ></script>
<script>

  // first get the dimensions and other info of the <div>
  const theDiv = document.getElementById("smokechart")
  const theHeight = theDiv.style.height
  const theWidth = theDiv.style.width

// Now set up the Smokechart
  const smokeData = [
    // [100],
    [0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100,105,110,115,120,125,130,135,140,145,150,155,160,165,170,175,180,185,190,195,200,205,210,215,220,225,230,235,240,245,250,255,260,265,270,275,280,285,290,295,300,305,310,315,320,325,330,335,340,345,350,355,360,365,370,375,380,385,390,395,400,405,410,415,420,425,430,435,440,445,450,455,460,465,470,475,480,485,490,495,500 ]
    // , [100]
    // , [200]
    // , [300]
    // , [400]
  ]
  const smokeOpts = {
    percentiles: [[0, 1], [0.05, 0.95]],
    smokeOpacity: [0.10],
    scaleX: d3.scaleLinear([50, 1000]),
    scaleY: d3.scaleLinear([250, 10])
  }
  const newChart = new Smokechart.Smokechart(smokeData, smokeOpts)
  // add any Smokechart options to override built-ins here
  // newChart.addProps(smokeOpts)


  const chart1 = d3.select("#smokechart")
    .append("svg")
    .attr("width", theWidth)
    .attr("height", theHeight )
    const g = chart1.append("g")

  // draw the smoke bands
   g.selectAll("path.smokeBand")
    .data(newChart.computeSmokePaths())
    .enter()
    .append("path")
    .classed("smokeBand", true)
    .attr("fill", function(d, i) {return newChart.fillSmoke(d, i)})
    .attr("d", d => d)

  // draw the median line
  g.selectAll("path.medianLine")
    .data(newChart.computeSmokeMedian())
    .enter()
    .append("path")
    .classed("medianLine", true)
    .attr("stroke", "#00cc00")
    .attr("stroke-width", 2)
    .attr("fill", "transparent")
    .attr("d", d => d)



</script>
</body>
</html>
